#!ipxe
# roles/ipxe_bootloader/templates/machine-example-nas.ipxe.j2
# NAS Installation configuration

echo Installing NAS (Debian + OMV)...
echo

# For NAS, boot Debian netinstall with preseed
# This is a placeholder - adjust kernel/initrd paths as needed
set base_url http://{{ ansible_default_ipv4.address | default('192.168.1.1') }}

# Example: Download Debian kernel and initrd (would need to be present)
# kernel ${base_url}/boot/debian/vmlinuz-amd64 auto=true priority=critical preseed/url=${base_url}/preseed/nas.cfg
# initrd ${base_url}/boot/debian/initrd.gz
# boot

# Fallback: boot from local disk if kernels not available
echo NAS boot configuration not yet available
echo Booting from local disk...
sanboot --no-describe --drive 0x80
